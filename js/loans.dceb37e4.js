(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["loans"],{"01d8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[t.loans.error?a("v-alert",{attrs:{prominent:"",type:"error"}},[t._v(" "+t._s(t.loans)+" ")]):a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"headline mb-4"},[t._v(" Your Loans ")]),t.user.data?0==t.user.data.user.loans.length?a("v-alert",[t._v(" You have no loan history. ")]):t._l(t.user.data.user.loans,(function(e,s){return a("v-card",{key:s,staticClass:"mb-4"},[("CURRENT"==e.status||e.status,[a("v-card-text",{staticClass:"pb-0"},[a("v-row",[a("v-col",[t._v(" "+t._s(t.prettifyEnum(e.type))+" ")]),a("v-col",{staticClass:"text-right"},[a("v-chip",{attrs:{small:"",label:""}},[t._v(" "+t._s(t.prettifyEnum(e.status))+" ")])],1)],1),a("div",{staticClass:"text-h5 text--primary"},[t._v(" "+t._s(t.abbreviate(e.repaymentAmount))+" "),a("small",[t._v("Credits due")]),t._v(" "),a("timeago",{attrs:{datetime:e.due,"auto-update":10}})],1)],1),a("v-card-actions",[a("v-divider",{staticClass:"ml-2 mr-5"}),a("v-btn",{attrs:{depressed:"",color:"primary",disabled:e.repaymentAmount>t.user.data.user.credits,loading:t.loading},on:{click:function(a){return t.repayLoan(e.id)}}},[t._v(" Repay Loan ")])],1)])],2)})):a("div",[a("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"card-heading"}}),a("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"card-heading"}})],1)],2),a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"headline mb-4"},[t._v(" Available Loans ")]),t.loans.data?0==t.loans.data.loans.length?a("v-alert",[t._v(" You have no loan offers. ")]):a("div",t._l(t.loans.data.loans,(function(e,s){return a("v-card",{key:s,staticClass:"mb-3"},[a("v-card-text",{staticClass:"pb-0"},[a("v-row",[a("v-col",[t._v(" "+t._s(t.prettifyEnum(e.type))+" ")]),a("v-col",{staticClass:"text-right"},[t._v(" "+t._s(e.termInDays)+" days ")])],1),a("div",{staticClass:"text-h5 text--primary"},[t._v(" "+t._s(t.abbreviate(e.amount))+" "),a("small",[t._v("Credits at")]),t._v(" "+t._s(e.rate)),a("small",[a("sup",[t._v("%")])])])],1),a("v-card-actions",[e.collateralRequired?a("v-chip",{staticClass:"mr-2"},[t._v(" Collateral Required ")]):t._e(),a("v-divider",{staticClass:"ml-2 mr-5"}),a("v-btn",{attrs:{depressed:"",color:"primary",disabled:!t.user.data||t.hasCurrentLoan,loading:t.loading},on:{click:function(a){return t.acceptLoan(e.type)}}},[t._v(" Accept Loan ")])],1)],1)})),1):a("div",[a("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"card-heading"}}),a("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"card-heading"}}),a("v-skeleton-loader",{staticClass:"mb-4",attrs:{type:"card-heading"}})],1)],1)],1)],1)},r=[],n=a("1da1"),i=(a("96cf"),a("2db4")),o={mixins:[i["b"],i["a"]],chimera:{user:function(){return{key:"user-"+this.$store.state.username,url:"/users/"+this.$store.state.username,interval:6e4}},loans:function(){return{key:this.$store.state.username+"-loans",url:"/game/loans",interval:6e4}}},data:function(){return{loading:!1}},computed:{hasCurrentLoan:function(){return this.user.data.user.loans.some((function(t){return"CURRENT"==t.status}))}},methods:{acceptLoan:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,e.axios.post("/users/"+e.$store.state.username+"/loans",{type:t});case 4:return a.next=6,e.user.reload(!0);case 6:return a.next=8,e.loans.reload(!0);case 8:return a.next=10,e.$store.dispatch("UPDATE_CREDITS");case 10:a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](1),console.error(a.t0);case 15:e.loading=!1;case 16:case"end":return a.stop()}}),a,null,[[1,12]])})))()},repayLoan:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,a.prev=1,a.next=4,e.axios.put("/users/"+e.$store.state.username+"/loans/"+t);case 4:return a.next=6,e.user.reload(!0);case 6:return a.next=8,e.loans.reload(!0);case 8:return a.next=10,e.$store.dispatch("UPDATE_CREDITS");case 10:a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](1),console.error(a.t0);case 15:e.loading=!1;case 16:case"end":return a.stop()}}),a,null,[[1,12]])})))()}}},l=o,c=a("2877"),d=a("6544"),u=a.n(d),v=a("0798"),p=a("8336"),h=a("b0af"),m=a("99d9"),b=a("cc20"),g=a("62ad"),f=a("a523"),y=a("ce7e"),_=a("0fd9"),x=a("3129"),C=Object(c["a"])(l,s,r,!1,null,null,null);e["default"]=C.exports;u()(C,{VAlert:v["a"],VBtn:p["a"],VCard:h["a"],VCardActions:m["a"],VCardText:m["b"],VChip:b["a"],VCol:g["a"],VContainer:f["a"],VDivider:y["a"],VRow:_["a"],VSkeletonLoader:x["a"]})},"1f09":function(t,e,a){},3129:function(t,e,a){"use strict";var s=a("3835"),r=a("5530"),n=(a("1276"),a("ac1f"),a("d81d"),a("a630"),a("3ca3"),a("5319"),a("1f09"),a("c995")),i=a("24b2"),o=a("7560"),l=a("58df"),c=a("80d2");e["a"]=Object(l["a"])(n["a"],i["a"],o["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:function(){return{}}}},computed:{attrs:function(){return this.isLoading?this.boilerplate?{}:Object(r["a"])({"aria-busy":!0,"aria-live":"polite",role:"alert"},this.$attrs):this.$attrs},classes:function(){return Object(r["a"])(Object(r["a"])({"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile},this.themeClasses),this.elevationClasses)},isLoading:function(){return!("default"in this.$scopedSlots)||this.loading},rootTypes:function(){return Object(r["a"])({actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text"},this.types)}},methods:{genBone:function(t,e){return this.$createElement("div",{staticClass:"v-skeleton-loader__".concat(t," v-skeleton-loader__bone")},e)},genBones:function(t){var e=this,a=t.split("@"),r=Object(s["a"])(a,2),n=r[0],i=r[1],o=function(){return e.genStructure(n)};return Array.from({length:i}).map(o)},genStructure:function(t){var e=[];t=t||this.type||"";var a=this.rootTypes[t]||"";if(t===a);else{if(t.indexOf(",")>-1)return this.mapBones(t);if(t.indexOf("@")>-1)return this.genBones(t);a.indexOf(",")>-1?e=this.mapBones(a):a.indexOf("@")>-1?e=this.genBones(a):a&&e.push(this.genStructure(a))}return[this.genBone(t,e)]},genSkeleton:function(){var t=[];return this.isLoading?t.push(this.genStructure()):t.push(Object(c["l"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},t):t},mapBones:function(t){return t.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter:function(t){this.resetStyles(t),this.isLoading&&(t._initialStyle={display:t.style.display,transition:t.style.transition},t.style.setProperty("transition","none","important"))},onBeforeLeave:function(t){t.style.setProperty("display","none","important")},resetStyles:function(t){t._initialStyle&&(t.style.display=t._initialStyle.display||"",t.style.transition=t._initialStyle.transition,delete t._initialStyle)}},render:function(t){return t("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})}}]);
//# sourceMappingURL=loans.dceb37e4.js.map